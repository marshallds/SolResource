<html>
<head>
	<title>Sol Resource</title>
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'>
	<style type="text/css">
	@import url(css/interface.css);
	@import url(css/overlay.css);

	svg {
		width:100%;
		height:100%;
	}
	#rangering {
		scale:0;
	}
	#orbit {
		  stroke: rgba(150,150,150,0.6);
		  fill: none;
		  stroke-width: 2;
		  stroke-dasharray: 2,4;
	}
	text.hexValue {
		fill: #fff;
		font-family: euro;
		font-weight: 300;
		font-size: 3em;
		text-anchor:middle;
		alignment-baseline:baseline;
	}
	text.hexLabel {
		font-family:  'Source Sans Pro', sans-serif;
		font-weight: 300;
		fill: #fff;
		font-size: 1.3em;
		text-anchor:middle;
	}

	</style>
</head>
<body>
	<audio id="music" src="assets/Sounds/redglowingdust.mp3" autoplay></audio>
	<audio id="buttonsound"><source src="assets/Sounds/menuclick.mp3"></source></audio>
	<!-- <div id="intro"><video src="assets/Demo1.mp4" poster="assets/a_title.png" autoplay controls preload="true"></video></div> -->
<div id="container">


<div id="overlayMenu">
	<div id="overlayClickZone"></div>
	<nav>
		<ul>
			<li class="active" rel="homeTab">HOME</li>
			<li rel="missionsTab">MISSIONS</li>
			<li rel="logisticsTab">LOGISTICS</li>
		</ul>
	</nav>
	<div id="homeTab" class="active">
		<ul class="minimalList">
			<li><img src="assets/Interface/notificationicon.png">Welcome aboard!
				<div><p>With a couple of repairs the station will be up and running at full capactiy in no time. Keep resources coming to the station, while keeping an eye on the logistics and you'll be fine!</p></div></li>
			<li><img src="assets/Interface/notificationicon.png"><span>Missions</span>A new mission is available </li>
			<li><img src="assets/Interface/notificationicon.png"><span>Logistics</span>Station systems damaged </li>
		</ul>
	</div>
	<div id="missionsTab">
		<div class="mission">
			<h2>Mission One</h2>
			<div>
			<p><span class="yellow">Calibrate</span> the sensors on the Series I probes after traveling to a nearby asteroid field. Additionally, <span class="blue">more resources are needed</span> to begin repairs on logistical systems.</p>
			<!-- <img src="play mission"> -->
			<ul>
				<li>Travel to an asteroid field<span class="right">0/1</span></li>
				<li><span class="yellow">Scan</span> three asteroids<span class="right">0/3</span></li>
				<li><span class="blue">Retrieve</span> two asteroids<span class="right">0/2</span></li>
			</ul></div>
		</div>
	</div>
	<div id="logisticsTab">
		<div id="logisticsTabMain">
			<div id="sensorsButton"></div>
		</div>
		<div id="sensorsTab">
			<h2>Sensors <span>Rating 1</span></h2>
			<p class="button" id="runsysdiag">run level 1 diagnostic</p>
			<p id="status"><span id="statusbox"></span>SYSTEM<br>status</p>
			<div id="systemsDisplay">
				<p>system status unknown</p>
				<div id="repairbutton">
					<p id="repairbuttontitle">REPAIR</p>
					<p id="repairnote">use resources to perform upkeep repairs before critical systems fail</p>
					<p id="repairrequiredresourceslabels">IRON<br>PLATINUM<br>HYDROGEN</p>
					<p id="repairrequiredresourcesvalues">40<br>25<br>80</p>
					<p id="repairrequiredtime">2:00</p>
				</div>
			</div>
			<div class="button" id="scanbutton"><p>SCAN<span>FUEL: 5%</span></p></div>
			<p class="buttonnote">Use radar to scan the surrounding area for asteroids of note</p>
		</div>
		
	</div>
</div>
<header>
<img src="assets/Interface/powerbutton.png">
<img src="assets/Interface/settingsbutton.png">
<h1>Lunar Orbital Station</h1>
<p id="topStatus">STATUS: <span>DAMAGED</span></p>

	<div id="bumperleft"></div>
	<div id="bumperright"></div>
</header>



<footer>
<h3>FUEL</h3>
<p id="fuelLabel">50%</p>
<div id="fuelbar"><img src="assets/Interface/energyglow.png"></div>
<div id="missionsButton"><p>1</p></div>
<div id="fleetButton"><p>0</p></div>
<div class="resourceBar" style="left:100px"><p>20</p><h3>Hydrogen</h3></div>
<div class="resourceBar" style="left:250px"><p>30</p><h3>Oxygen</h3></div>
<div class="resourceBar" style="left:400px"><p>40</p><h3>Iron</h3></div>
<div class="resourceBar" style="left:550px"><p>10</p><h3>Platinum</h3></div>

</footer>

<div id="notification">
	
</div>

<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" width="100%" height="100%" viewBox="0 0 800 1205">


			<circle cx="0" cy="0" r="800" id="orbit" />

</svg>

</div>


<script src="phonegap.js"></script>
<script src="js/jquery1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery.svg.min.js"></script>
<script type="text/javascript" src="js/jquery.svgdom.min.js"></script>
<script type="text/javascript" src="js/jquery.svganim.min.js"></script>
<script type="text/javascript" src="js/interface.js"></script>
<script type="text/javascript">
  $(document).ready(function() {


  	setFuel(0.82);

  	var scanTime = 3000;
  	var sysDiagTime = 5; //seconds

  	$('#scanbutton').on(touchEvent,function() {
  		$('#overlayMenu').toggleClass('active')
  		$('#rangering').animate({svgTransform:"scale(1)"},scanTime,'linear');
  		// $('#rangering use').animate({'opacity':1})
  		$('#blips use').each(function() {
  			var distance = Math.sqrt(Math.pow($(this).attr('x'),2) + Math.pow($(this).attr('y'),2));
  			$(this).delay(distance/400*scanTime).animate({svgOpacity:1},200)

  		})
  	});
  	$('#blips use').on(touchEvent,function() {
  		$('#map').animate({svgTransform:'scale(20) translate(' + -$(this).attr('x') + ',' + -$(this).attr('y') + ')'},3000,'swing')
  		$(this).animate({svgOpacity:0},3500)
  		$('#asteroidfield').animate({svgOpacity:1},3000,'swing')

  	})
  	$('#asteroidfield circle').on(touchEvent, function() {
  		$('#map').animate({svgTransform:'scale(80) translate(' + ( - $(this).parent().attr('x') - $(this).attr('cx')*0.05) + ',' + ( - $(this).parent().attr('y') - $(this).attr('cy')*0.05) + ')'},1000,'swing',function() {
  			$('#asteroidinfo').animate({svgTransform:'translate(0,0)'},0,'swing')
  			$('#asteroidinfo').animate({svgOpacity:1},600,'swing')
  		})
  	})
//   	document.addEventListener("touchstart", function(e){
// 	    $('h1').html(e.touches[0].pageY);

//     e.preventDefault();//Stops the default behavior
// }, false);
  	$('#fleetcolor').on(touchEvent, function() {
  		$('#fleetcolor, #deployarrow').animate({svgOpacity:0},600,'swing',function() {
  			gatherResourcesAnimation(5);
  		})
  	})

  	$('#intro video').on('ended pause',function() {
  		$(this).parent().remove()
  	});
  	$('#overlayClickZone').on(touchEvent,function() {
  		$('#overlayMenu').toggleClass('active')
  	});
  	$('#sensorsButton').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$(this).parent().toggleClass('logisticsActive')
  		$('#sensorsTab').toggleClass('active')
  	});
  	$('#sensorsTab h2').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$(this).parent().toggleClass('active');
  		$('#logisticsTabMain').toggleClass('logisticsActive')
  	});

  	$('#overlayMenu nav li').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$('#overlayMenu li').removeClass('active');
  		$(this).addClass('active');
  		var targetTab = "#" + $(this).attr('rel');
  		// $('#overlayMenu>.active').fadeOut('fast', function() {
  		// 	$(this).removeClass('active');
	  	// 	$(targetTab).fadeIn('fast').addClass('active')
  		// })
  		$('#overlayMenu>.active').removeClass('active');
		$(targetTab).addClass('active');
  	});
  	$('.mission, .minimalList li').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$(this).toggleClass('active')
  		$(this).find('div').slideToggle(1000);
  	});
  	$('#runsysdiag').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()

		$('#systemsDisplay>p').show()
		$('#repairbutton').hide()
  		$('#systemsDisplay>p').html('system diagnostic in progress... <span id="sysdiagcountdown">' + formatTime(sysDiagTime) + '</span> remaining')
  		countdown(sysDiagTime-1,'#sysdiagcountdown',function() {
  			if(getSensorStatus()) {
  				$('#systemsDisplay>p').html('all systems functional');
  				$('#statusbox').addClass('statusGreen');
  			}
  			else {
  				$('#systemsDisplay>p').hide()
  				$('#repairbutton').show()
  			}
  		})
  	});
  	$('#fleetButton').on(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$('#notification').html('<div id="fleetlist"><div><h3>Available</h3><p><img src="assets/Interface/babyfleeticon.png">class 1 extractor</p></div><div><h3>Deployed</h3><p><img src="assets/Interface/babyfleeticon.png">ice asteroid: K11428</p></div></div>')
  		$('#notification').fadeToggle()
  	});
  	$('#missionsButton,#notification').on(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$('#notification').html('')
  		$('#notification').fadeToggle()
  	});

  });
</script>

</body>
</html>