<html>
<head>
	<title>Sol Resource</title>
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900,200italic,300italic,400italic,600italic,700italic,900italic' rel='stylesheet' type='text/css'>
	<style type="text/css">

	@font-face {
	  font-family: euro;
	  src: url(fonts/eurostile.ttf);
	}  

	audio {
		display: none;
	}
	body {
		background: #000;
		margin:0;
		padding: 0;
	}
	p {
		margin:0;
		padding: 0;
	}
	#container {
		position: relative;
		width:800px;
		height: 1205px;
		border:1px solid #888;
		/*width: 100%;*/
		/*height: 100%;*/
		background: url(assets/Background/Background.png);
		overflow: hidden;

		color:#fff;
		font-family:  'Source Sans Pro', sans-serif;
		font-size: 16px;

	}
	header {
		position: absolute;
		right:0;
		left:0;
		height:104px;
		margin:0;
		padding:10px 30px;
		background:url(assets/Interface/topbumpers.png) 0 130px no-repeat,url(assets/Interface/topbaralert.png) no-repeat, url(assets/Interface/topbar.png) no-repeat;
	}
	#bumperleft, #bumperright {
		position: absolute;
		top:130px;
		height: 50px;
		width: 100px;
		background:url(assets/Interface/topbumpers.png) no-repeat;
	}
	#bumperleft {
		left:0;
	}
	#bumperright {
		right: 0;
		background:url(assets/Interface/topbumpers.png) no-repeat right;
	}
	h1 {
		font-weight: 200;
		font-size: 3em;
		margin: 0;
		padding:0;
	}
	#topStatus {
		font-size: 1.4em;
		font-family: euro;
		opacity: 0.99;
	}
	#topStatus span {
		font-weight: bold;
	}
	header img {
		float:right;
		margin: 10px 24px;
	}
	footer {
		position: absolute;
		bottom: 0;
		left:0;
		right: 0;
		height:200px;
		background: url(assets/Interface/lowerbar.png) 0 30px no-repeat;
	}
	h3 {
		font-family: euro;
		font-weight: normal;
		margin: 0;
		padding:0;
	}
	footer>h3 {
		position: absolute;
		left:80px;
		font-size: 1.5em;
	}
	#fuelLabel {
		position: absolute;
		left:50%;
		font-family: euro;
		font-size: 1.5em;
	}
	#fuelbar {
		position: absolute;
		top:30px;
		left:0px;
		right:0px;
		height:7px;
		padding:16px 0;
		/*background: url(assets/Interface/energybarbase.png) no-repeat;*/
		background: -webkit-linear-gradient(left,rgba(255,255,255,0.7) 50%,rgba(255,255,255,0.3) 50%);
		background: rgba(255,255,255,0.3);
		background-clip: content-box !important; 
		-webkit-mask: url(assets/Interface/lowerbarmask.png);
	}

	#fuelbar img {
		position:absolute;
		left:49%;
		top:10px;
	}
	#missionsButton {
		position: absolute;
		background:url(assets/Interface/missionsbutton.png) top left no-repeat;
		top:55px;
		left:10px;
		width:1.2em;
		height: 1em;
		padding:6px 80px 80px 3px;
		font-size: 1.6em;
		font-family: euro;
		text-align: center;
	}
	#fleetButton {
		position: absolute;
		background: url(assets/Interface/fleetbutton.png) top right no-repeat;
		right:10px;
		top:55px;
		width:1.2em;
		height: 1em;
		padding:6px 9px 80px 80px;
		font-size: 1.6em;
		font-family: euro;
		text-align: center;
	}
	.resourceBar {
		position: absolute;
		width: 150px;
		top: 80px;
		text-align: center;
		font-family: euro;
		opacity: 0.99;
	}
	.resourceBar p {
		font-size: 2.4em;
		padding:22px;
	}
	.resourceBar h3 {
		font-size: 1.5em;
	}

	#notification {
		position: absolute;
		display: none;
		top:50%;
		left:50%;
		margin: -4.5em 0 0 -7.5em;
		height:6em;
		width:12em;
		padding: 1.5em;
		background: rgba(0,0,0,0.7);
		border:1px solid rgba(255,255,255,0.3);
		text-align: center;
		font-size: 1.5em;
		z-index: 99;
		-webkit-transform: translate3d(0,0px,0);
	}


	.yellow {
		color:#fb0;
	}
	.blue {
		color: #6ce;
	}
	.right {
		float: right;
		margin-left:1.5em;
	}
	.left {
		float: left;
		margin-right: 1.5em;
	}


	#overlayMenu {
		position: absolute;
		top:0px;
		height: 992px;
		width: 800px;
		background:url(assets/Interface/midbackground.png) no-repeat;
		-webkit-transition: all 1.2s ease;
		-webkit-transform: translate3d(0,-826px,0);
	}
	#overlayMenu.active {
		-webkit-transform: translate3d(0,0px,0);
	}
	#overlayMenu>.active {
		opacity:0.3;
	}
	#overlayClickZone {
		position: absolute;
		display:block !important;
		height: 80px;
		right:50px;
		left: 50px;
		bottom: -40px;
		z-index: 20;
	}
	#overlayMenu nav {
		margin: 138px 0 40px;
		font-family: euro;
		font-size: 1.4em;
		overflow: hidden;
	}
	#overlayMenu nav ul {
		list-style: none;
		margin: 0;
	}
	#overlayMenu nav li {
		display: block;
		float:left;
		width:240px;
		height:90px;
		line-height: 90px;
		text-align: center;
		margin:0;
	}
	#overlayMenu nav ul li:nth-child(1) {
		background: url(assets/Interface/homebutton.png);
	}
	#overlayMenu nav ul li:nth-child(1).active {
		background: url(assets/Interface/homebuttonselect.png);
	}
	#overlayMenu nav ul li:nth-child(2) {
		background: url(assets/Interface/missionbutton.png);
	}
	#overlayMenu nav ul li:nth-child(2).active {
		background: url(assets/Interface/missionbuttonselect.png);
	}
	#overlayMenu nav ul li:nth-child(3) {
		background: url(assets/Interface/logisticsbutton.png);
	}
	#overlayMenu nav ul li:nth-child(3).active {
		background: url(assets/Interface/logisticsbuttonselected.png);
	}
	#overlayMenu>div {
		position: absolute;
		padding:5px 38px;
		left:0;
		right: 0;
		font-size: 1.6em;
		opacity: 0;
		-webkit-transition: all 0.4s ease;
		-webkit-transform: translate3d(0,0,0);
	}
	#overlayMenu.active>.active {
		opacity: 1.0;
		z-index: 10;

	}

	.minimalList {
		list-style: none;
		padding: 0;
		letter-spacing: 3px;
	}
	.minimalList li {
		line-height: 38px;
		padding:20px 0;
	}
	.minimalList img {
		margin-right: 30px;
		float: left;
	}
	.minimalList li>span {
		float: right;
		font-style: italic;
		font-weight: 200;
	}
	.minimalList p {
		margin:0.5em 0.5em 0em 5.5em;
		font-size: 0.86em;
		font-weight: 300;
		letter-spacing: 0;
		line-height: 1.2;
		-webkit-transform: translate3d(0,0,0);

	}
	.mission {
		/*font-weight: 200;*/
		letter-spacing: 1px;
		font-size: 0.97em;
		/*height:90px;*/
		overflow: hidden;
		background: url(assets/Interface/menubartoggle.png) no-repeat, url(assets/Interface/togglearrownotpushed.png) no-repeat 90% 28px;
	}
	.mission.active {
		height: auto;
		background: url(assets/Interface/menubartoggle.png) no-repeat, url(assets/Interface/togglearrowpushed.png) no-repeat 90% 28px;
	}
	.mission div, .minimalList div {
		display:none;
	}
	h2 {
		font-family: euro;
		font-weight: normal;
		line-height: 24px;
		padding: 31px;
		margin: 0;
	}
	.mission h2 {
		font-size:1.7em;
	}
	.mission p {
		margin: 8px 20px;
	}
	.mission ul {
		list-style: square;
		list-style-position: inside;
		font-style: italic;
		margin: 20px;
		margin-right: 100px;
		padding: 0;
	}

	#logisticsTab {
		background: url(assets/logistics/logisticsplaceholder.png) no-repeat;
		height: 700px;
		letter-spacing: 0;
		font-weight: 200;
		-webkit-transform-origin: 0 0;
	}
	.logisticsActive {
		/*left:800px !important;*/
		-webkit-transform: translate3d(800px,200px,0) scale3d(3.5,3.5,1) !important;
	}
	#sensorsButton {
		position: absolute;
		left:20px;
		top:10px;
		width:600px;
		height: 100px;
	}
	#sensorsTab {
		font-size: 1.2em;
		font-weight: 200;
	}
	#sensorsTab h2 {
		background: url(assets/logistics/sensorbar.png) no-repeat;
		opacity: 0.99;
		line-height: 40px;
		padding:32px 50px;
		margin: 0em 0 1em;
	}
	h2 span {
		font-size: 0.7em;
		padding-left: 1em;
	}
	#status {
		line-height: 0.9;
		padding-top:1em;
	}
	#status img {
		float:left;
		margin-right: 0.5em
	}
	#statusbox {
		height:1.8em;
		width:1.8em;
		float:left;
		margin-right: 0.2em;
		background:#c58976; /*7cc576*/
		opacity: 0.3;
	}
	.button {
		float:right;
		margin-left: 0.5em;
		margin-right:9px;
		height: 79px;
		width:412px;
		line-height: 79px;
		text-align: center;
		background: url(assets/logistics/rundiagnostic.png) no-repeat;
		z-index: 1;
	}
	.buttonnote {
		width:300px;
		font-size: 0.8em;
		text-align: right;
		padding-top: 0.8em;
		opacity: 0.9;
	}
	#systemsDisplay {
		overflow: hidden;
		height:202px;
		background: url(assets/logistics/brackets.png) no-repeat;
		margin: 1em 0 2em;
		opacity: 0.9;
	}
	#systemsDisplay p {
		text-align: center;
		line-height: 202px;
		margin-bottom:1em;
	}
	#scanbutton {
		background: url(assets/logistics/scanbutton.png) no-repeat;
		height: 151px;
		font-size: 2.1em;
	}
	#scanbutton:active {
		/*background: url(assets/logistics/scanbuttonpress.png) no-repeat;*/
		box-shadow: 0 0 18px #fff;
	}
	#scanbutton p {
		padding: 0.25em 1em 0 0;
	}
	#scanbutton span {
		display: block;
		font-size: 0.5em;
		font-family: euro;
		margin-left:8px;
		text-align: left;
		text-shadow: 1px 1px 0px #000;
	}

	svg {
		width:100%;
		height:100%;
	}
	#rangering {
		scale:0;
	}
	#orbit {
		  stroke: rgba(150,150,150,0.6);
		  fill: none;
		  stroke-width: 2;
		  stroke-dasharray: 2,4;
	}

	</style>
</head>
<body>
	<audio id="buttonsound"><source src="assets/Sounds/menuclick.mp3"></source></audio>
<div id="container">


<div id="overlayMenu">
	<div id="overlayClickZone"></div>
	<nav>
		<ul>
			<li class="active" rel="homeTab">HOME</li>
			<li rel="missionsTab">MISSIONS</li>
			<li rel="logisticsTab">LOGISTICS</li>
		</ul>
	</nav>
	<div id="homeTab" class="active">
		<ul class="minimalList">
			<li><img src="assets/Interface/notificationicon.png">Welcome aboard!
				<div><p>With a couple of repairs the station will be up and running at full capactiy in no time. Keep resources coming to the station, while keeping an eye on the logistics and you'll be fine!</p></div></li>
			<li><img src="assets/Interface/notificationicon.png"><span>Missions</span>A new mission is available </li>
			<li><img src="assets/Interface/notificationicon.png"><span>Logistics</span>Station systems damaged </li>
		</ul>
	</div>
	<div id="missionsTab">
		<div class="mission">
			<h2>Mission One</h2>
			<div>
			<p><span class="yellow">Calibrate</span> the sensors on the Series I probes after traveling to a nearby asteroid field. Additionally, <span class="blue">more resources are needed</span> to begin repairs on logistical systems.</p>
			<!-- <img src="play mission"> -->
			<ul>
				<li>Travel to an asteroid field<span class="right">0/1</span></li>
				<li><span class="yellow">Scan</span> three asteroids<span class="right">0/3</span></li>
				<li><span class="blue">Retrieve</span> two asteroids<span class="right">0/2</span></li>
			</ul></div>
		</div>
	</div>
	<div id="logisticsTab">
		<div id="sensorsButton"></div>
	</div>
	<div id="sensorsTab">
		<h2>Sensors <span>Rating 1</span></h2>
		<p class="button" id="runsysdiag">run system diagnostic</p>
		<p id="status"><span id="statusbox"></span>SYSTEM<br>status</p>
		<div id="systemsDisplay"><p>system status unknown</p></div>
		<div class="button" id="scanbutton"><p>SCAN<span>FUEL: 5%</span></p></div>
		<p class="buttonnote">Use radar to scan the surrounding area for asteroids of note</p>
	</div>
</div>
<header>
<img src="assets/Interface/powerbutton.png">
<img src="assets/Interface/settingsbutton.png">
<h1>Lunar Orbital Station</h1>
<p id="topStatus">STATUS: <span>DAMAGED</span></p>

	<div id="bumperleft"></div>
	<div id="bumperright"></div>
</header>



<footer>
<h3>FUEL</h3>
<p id="fuelLabel">50%</p>
<div id="fuelbar"><img src="assets/Interface/energyglow.png"></div>
<div id="missionsButton"><p>1</p></div>
<div id="fleetButton"><p>0</p></div>
<div class="resourceBar" style="left:100px"><p>20</p><h3>Hydrogen</h3></div>
<div class="resourceBar" style="left:250px"><p>30</p><h3>Oxygen</h3></div>
<div class="resourceBar" style="left:400px"><p>40</p><h3>Iron</h3></div>
<div class="resourceBar" style="left:550px"><p>10</p><h3>Platinum</h3></div>

</footer>

<div id="notification">Hi.</div>

<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" width="100%" height="100%" viewBox="0 0 800 1205">

    <radialGradient id = "blipPulse" cx = "50%" cy = "50%" r = "50%">

        <stop stop-color = "#3ddeed" offset = "0%" stop-opacity = "0.2">
	    	<animate attributeName="stop-opacity" begin="0s" dur="3s" values="1;0;1" repeatCount="indefinite" />
        </stop>
        <stop stop-color = "#3ddeed" offset = "0%" stop-opacity = "1">
	    	<animate attributeName="offset" begin="0s" dur="3s" values="0;1;1;0" repeatCount="indefinite" />
	    	<animate attributeName="stop-opacity" begin="0s" dur="3s" values="0;1;0;0" repeatCount="indefinite" />
	    </stop>

        <stop stop-color = "#3ddeed" offset = "2" stop-opacity = "0">
    </radialGradient>
	<defs>
		<g id="blip">
	    <circle cx = "0" cy = "0" r = "20" fill = "url(#blipPulse)" stroke = "#3ddeed" stroke-width = "2" opacity="0.3"/>
	    <circle cx = "0" cy = "0" r = "7" fill = "#3ddeed" stroke = "none" stroke-width = "0"/>
		</g>
	</defs>

    <radialGradient id = "g1" cx = "50%" cy = "50%" r = "50%">
        <stop stop-color = "#3ddeed" offset = "0%"  stop-opacity = "0"/>
        <stop stop-color = "#3ddeed" offset = "60%" stop-opacity = "0"/>
        <stop stop-color = "#3ddeed" offset = "86%" stop-opacity = "0.1"/>
        <stop stop-color = "#3ddeed" offset = "100%" stop-opacity = "0.25"/>
    </radialGradient>
    <filter id = "i1" x = "0%" y = "0%" width = "100%" height = "100%">
        <feImage xlink:href = "assets/earth.png"/>
    </filter>

    <g id="mapcenter" transform="translate(400,600)">
    <g id="map" transform="scale(1) translate(0,0)">
	<circle cx="-800" cy="0" r="800" id="orbit" />
	<circle id="rangering" cx="0" cy="0" r="400" fill="url(#g1)" transform="scale(0)" />
	<g id="blips">
		<use id="loc0" x = "100" y = "150" xlink:href = "#blip" opacity="0" />
		<use id="loc1" x = "-180" y = "110" xlink:href = "#blip" opacity="0" />
		<use id="loc2" x = "230" y = "-70" xlink:href = "#blip" opacity="0" />
	</g>
	<circle cx="0" cy="0" r="17" fill="blue" filter="url(#i1)" id="earth" />
</g>
</svg>

</div>


<script src="phonegap.js"></script>
<script src="js/jquery1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery.svg.min.js"></script>
<script type="text/javascript" src="js/jquery.svgdom.min.js"></script>
<script type="text/javascript" src="js/jquery.svganim.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {

  	var setFuel = function(newValue) { // newValue is between 0 and 1
  		if (newValue <=1 && newValue >=0) {
  			var newValuePercent = Math.floor(newValue*100) + '%';
  			var scaledValue = newValue*650;
  			$('#fuelLabel').text(newValuePercent); //floor or round?
  			if (scaledValue > (140-50)) $('#fuelLabel').css("left", scaledValue + 50)
			else $('#fuelLabel').css("left", 140)
  			$('#fuelbar img').css("left", scaledValue + 44)
  			if (newValue >0.15) $('#fuelbar').css({"background":"-webkit-linear-gradient(left,rgba(255,255,255,0.6) " + (scaledValue+67) + ",rgba(255,255,255,0.2) " + (scaledValue+71) + ")"})
			else $('#fuelbar').css({"background":"-webkit-linear-gradient(left,rgba(255,100,100,0.6) " + (scaledValue+67) + ",rgba(255,150,150,0.2) " + (scaledValue+71) + ")"})
  		}

  	}
  	var formatTime = function(seconds) {
  		return Math.floor(seconds/60) + ':' + ('0'+ (seconds % 60)).slice(-2);
  	}
  	var countdown = function(time,target,callback){
  	  var countdownloop = setInterval(function(){
  	    $(target).html(formatTime(time));
  	    if (time <= 0) {
  	      callback();
  	    }
  	    time--;
  	  }, 1000);
  	};

  	setFuel(0.82);

  	var touchEvent = 'touchend'; // touchend click

  	var scanTime = 3000;
  	var sysDiagTime = 5; //seconds

  	$('#scanbutton').on(touchEvent,function() {
  		$('#logisticsTab').toggleClass('logisticsActive')
  		$('#sensorsTab').toggleClass('active')
  		$('#overlayMenu').toggleClass('active')
  		$('#rangering').animate({svgTransform:"scale(1)"},scanTime,'linear');
  		// $('#rangering use').animate({'opacity':1})
  		$('#blips use').each(function() {
  			var distance = Math.sqrt(Math.pow($(this).attr('x'),2) + Math.pow($(this).attr('y'),2));
  			$(this).delay(distance/400*scanTime).animate({'opacity':1},200)
  			$(this).on(touchEvent,function() {
  				$('#map').animate({svgTransform:'scale(20) translate(' + -$(this).attr('x') + ',' + -$(this).attr('y') + ')'},5000,'easeout')

  			})
  		})
  	});

  	$('#overlayClickZone').bind(touchEvent,function() {
  		$('#overlayMenu').toggleClass('active')
  	});
  	$('#sensorsButton').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$(this).parent().toggleClass('logisticsActive')
  		$('#sensorsTab').toggleClass('active')
  	});
  	$('#sensorsTab h2').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$(this).parent().toggleClass('active');
  		$('#logisticsTab').toggleClass('logisticsActive')
  	});

  	$('#overlayMenu nav li').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$('#overlayMenu li').removeClass('active');
  		$(this).addClass('active');
  		var targetTab = "#" + $(this).attr('rel');
  		// $('#overlayMenu>.active').fadeOut('fast', function() {
  		// 	$(this).removeClass('active');
	  	// 	$(targetTab).fadeIn('fast').addClass('active')
  		// })
  		$('#overlayMenu>.active').removeClass('active');
		$(targetTab).addClass('active');
  	});
  	$('.mission, .minimalList li').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$(this).toggleClass('active')
  		$(this).find('div').slideToggle();
  	});
  	$('#runsysdiag').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$('#systemsDisplay p').html('system diagnostic in progress. <span id="sysdiagcountdown">' + formatTime(sysDiagTime) + '</span> remaining')
  		countdown(sysDiagTime-1,'#sysdiagcountdown',function() {
  			$('#systemsDisplay p').html('system failure detected')
  		})
  	});
  	$('#missionsbutton,#fleetbutton,#notification').bind(touchEvent,function() {
  		document.getElementById('buttonsound').play()
  		$('#notification').fadeToggle()
  	});

  });
</script>
<!-- 
system status init as red, system status unknown
click run system diagnostic
system diagnostic in progress. 0:05 remaining
5 seconds
display repair button
all systems functional
 -->
</body>
</html>